
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>CLIMADA features &#8212; climada 1.2.4-dev documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Data dependencies" href="../guide/data_dependencies.html" />
    <link rel="prev" title="Tutorial" href="../guide/tutorial.html" /> 
  </head><body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../index.html"><h1 style="font-size: 3em;">climada</h1></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../guide/data_dependencies.html" title="Data dependencies"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../guide/tutorial.html" title="Tutorial"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../search.html">search</a>|&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../guide/tutorial.html" accesskey="U">Tutorial</a> &#187;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">CLIMADA features</a></li>
<li><a class="reference internal" href="#Risk-assessment">Risk assessment</a><ul>
<li><a class="reference internal" href="#Entity">Entity</a><ul>
<li><a class="reference internal" href="#Exposures">Exposures</a></li>
<li><a class="reference internal" href="#Impact-Functions">Impact Functions</a></li>
<li><a class="reference internal" href="#Adaptation-Measures">Adaptation Measures</a></li>
<li><a class="reference internal" href="#Discount-Rates">Discount Rates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Hazard">Hazard</a></li>
<li><a class="reference internal" href="#Impact">Impact</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Adaptation-options-appraisal">Adaptation options appraisal</a></li>
<li><a class="reference internal" href="#Your-case">Your case</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../guide/tutorial.html"
                        title="previous chapter">Tutorial</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../guide/data_dependencies.html"
                        title="next chapter">Data dependencies</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/tutorial/1_main_climada.ipynb.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 7ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="CLIMADA-features">
<h1>CLIMADA features<a class="headerlink" href="#CLIMADA-features" title="Permalink to this headline">Â¶</a></h1>
<p>The functionality of climada is gathered in the following classes:</p>
<ul class="simple">
<li>Entity: socio-economic models</li>
<li>Exposures: exposed values<ul>
<li>BlackMarble: regional economic model from nightlight intensities and economic indicators (GDP, income group)</li>
<li>LitPop: regional economic model using nightlight and population maps together with several economic indicators</li>
</ul>
</li>
<li>ImpactFuncSet: collection of impact functions per hazard<ul>
<li>ImpactFunc: one adjustable impact function</li>
<li>IFTropCyclone: definition of impact functions for tropical cyclones</li>
</ul>
</li>
<li>DiscRates: discount rates per year</li>
<li>MeasureSet: collection of measures for adaptation<ul>
<li>Measure: one configurable measure</li>
</ul>
</li>
<li>Hazard: meteorological models</li>
<li>TropCyclone: tropical cyclone events</li>
<li>Impact: impacts of the Hazard and Entity interaction</li>
<li>CostBenefit: adaptation options appraisal</li>
</ul>
</div>
<div class="section" id="Risk-assessment">
<h1>Risk assessment<a class="headerlink" href="#Risk-assessment" title="Permalink to this headline">Â¶</a></h1>
<div class="section" id="Entity">
<h2>Entity<a class="headerlink" href="#Entity" title="Permalink to this headline">Â¶</a></h2>
<p>The entity class is just a container for the exposures, impact functions, discount rates and measures. It can be directly filled from an excel file following climadaâs template or from MATLAB files of the climada MATLAB version. The excel template can be found in <code class="docutils literal notranslate"><span class="pre">climada_python/data/system/entity_template.xlsx</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">climada.entity</span> <span class="kn">import</span> <span class="n">Entity</span>
<span class="kn">from</span> <span class="nn">climada.util.constants</span> <span class="kn">import</span> <span class="n">ENT_DEMO_TODAY</span>

<span class="c1"># absolute path of file following template.</span>
<span class="n">ent_file</span> <span class="o">=</span> <span class="n">ENT_DEMO_TODAY</span>
<span class="n">ent_fl</span> <span class="o">=</span> <span class="n">Entity</span><span class="p">()</span>
<span class="n">ent_fl</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">ent_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2019-04-05 11:30:38,468 - climada - DEBUG - Loading default config file: /Users/aznarsig/Documents/Python/climada_python/climada/conf/defaults.conf
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/Users/aznarsig/anaconda3/envs/climada_env_comp/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.
  from ._conv import register_converters as _register_converters
</pre></div></div>
</div>
<p>Every class has a <code class="docutils literal notranslate"><span class="pre">check()</span></code> method. This verifies that the necessary data to compute the impact is correctly provided and logs the optional variables that are not present. Use it always after filling an instance.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ent_fl</span><span class="o">.</span><span class="n">check</span><span class="p">()</span> <span class="c1"># checks exposures, impact functions, discount rates and measures</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2019-04-05 11:30:40,147 - climada.entity.exposures.base - INFO - crs set to default value: {&#39;init&#39;: &#39;epsg:4326&#39;}
2019-04-05 11:30:40,149 - climada.entity.exposures.base - INFO - ref_year metadata set to default value: 2018
2019-04-05 11:30:40,150 - climada.entity.exposures.base - INFO - value_unit metadata set to default value: USD
2019-04-05 11:30:40,151 - climada.entity.exposures.base - INFO - centr_ not set.
2019-04-05 11:30:40,152 - climada.entity.exposures.base - INFO - category_id not set.
2019-04-05 11:30:40,153 - climada.entity.exposures.base - INFO - region_id not set.
2019-04-05 11:30:40,154 - climada.entity.exposures.base - INFO - geometry not set.
</pre></div></div>
</div>
<div class="section" id="Exposures">
<h3>Exposures<a class="headerlink" href="#Exposures" title="Permalink to this headline">Â¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Entity</span></code>âs <code class="docutils literal notranslate"><span class="pre">exposures</span></code> attribute contains geolocalized values of anything exposed to the hazard, let it be monetary value of assets or number of human lifes, for example. It is of type <code class="docutils literal notranslate"><span class="pre">Exposures</span></code>.</p>
<p>See <a class="reference internal" href="climada_entity_Exposures.html"><span class="doc">Exposures</span></a> tutorial to learn how to fill and use exposures.</p>
<p>See <a class="reference internal" href="climada_entity_LitPop.html"><span class="doc">LitPop</span></a> to model economic exposures using night-time light and population densitites. See <a class="reference internal" href="climada_entity_BlackMarble.html"><span class="doc">BlackMarble</span></a> to model economic exposures based only on night-time light intensities.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="n">ent_fl</span><span class="o">.</span><span class="n">exposures</span><span class="o">.</span><span class="n">plot_basemap</span><span class="p">(</span><span class="nb">buffer</span><span class="o">=</span><span class="mf">50000.0</span><span class="p">);</span> <span class="c1"># exposures in Florida</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2019-04-05 11:30:40,165 - climada.entity.exposures.base - INFO - Setting geometry attribute.
2019-04-05 11:30:40,173 - climada.entity.exposures.base - INFO - Setting latitude and longitude attributes.
2019-04-05 11:30:41,762 - climada.entity.exposures.base - INFO - Setting latitude and longitude attributes.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_8_1.png" src="../_images/tutorial_1_main_climada_8_1.png" />
</div>
</div>
</div>
<div class="section" id="Impact-Functions">
<h3>Impact Functions<a class="headerlink" href="#Impact-Functions" title="Permalink to this headline">Â¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">impact_funcs</span></code> attribute is of type <code class="docutils literal notranslate"><span class="pre">ImpactFuncSet</span></code>. As such, it contains impact functions for different hazards.</p>
<p>See <a class="reference internal" href="climada_entity_ImpactFuncSet.html"><span class="doc">Impact Functions</span></a> tutorial to learn how to handle this class.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ent_fl</span><span class="o">.</span><span class="n">impact_funcs</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;TC&#39;</span><span class="p">);</span> <span class="c1"># tropical cyclone impact functions</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_10_0.png" src="../_images/tutorial_1_main_climada_10_0.png" />
</div>
</div>
</div>
<div class="section" id="Adaptation-Measures">
<h3>Adaptation Measures<a class="headerlink" href="#Adaptation-Measures" title="Permalink to this headline">Â¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">measures</span></code> attribute is of type <code class="docutils literal notranslate"><span class="pre">MeasureSet</span></code>. This class is a container of <code class="docutils literal notranslate"><span class="pre">Measure</span></code> instances, similarly to <code class="docutils literal notranslate"><span class="pre">ImpactFuncSet</span></code> containing several <code class="docutils literal notranslate"><span class="pre">ImpactFunc</span></code>. Adaptation measures aim to decrease hazards impacts and are subjected to a cost.</p>
<p>See <a class="reference internal" href="climada_entity_MeasureSet.html"><span class="doc">Adaptation Measures</span></a> to learn to handle measures.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># print measures names</span>
<span class="k">print</span><span class="p">(</span><span class="n">ent_fl</span><span class="o">.</span><span class="n">measures</span><span class="o">.</span><span class="n">get_names</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;TC&#39;: [&#39;Mangroves&#39;, &#39;Beach nourishment&#39;, &#39;Seawall&#39;, &#39;Building code&#39;]}
</pre></div></div>
</div>
</div>
<div class="section" id="Discount-Rates">
<h3>Discount Rates<a class="headerlink" href="#Discount-Rates" title="Permalink to this headline">Â¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">disc_rates</span></code> attribute is of type <code class="docutils literal notranslate"><span class="pre">DiscRates</span></code>. This class contains the discount rates for the following years and computes the net present value for given values.</p>
<p>See <a class="reference internal" href="climada_entity_DiscRates.html"><span class="doc">Discount Rates</span></a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ent_fl</span><span class="o">.</span><span class="n">disc_rates</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>(&lt;Figure size 288x288 with 1 Axes&gt;,
 [&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a1ba01e10&gt;])
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_14_1.png" src="../_images/tutorial_1_main_climada_14_1.png" />
</div>
</div>
</div>
</div>
<div class="section" id="Hazard">
<h2>Hazard<a class="headerlink" href="#Hazard" title="Permalink to this headline">Â¶</a></h2>
<p>Hazards are characterized by their frequency of occurrence and the geographical distribution of their intensity. A <code class="docutils literal notranslate"><span class="pre">Hazard</span></code> instance collects events of the same hazard type (e.g. tropical cyclone, flood, drought, â¦) over the same centroids. They might be historical events or synthetic.</p>
<p>See <a class="reference internal" href="climada_hazard_Hazard.html"><span class="doc">Hazard</span></a> to learn how to handle hazards.</p>
<p>See <a class="reference internal" href="climada_hazard_TropCyclone.html"><span class="doc">TropCyclone</span></a> to learn to model tropical cyclones.</p>
<p>A complete set of tropical cyclones events in Florida can be found in file <code class="docutils literal notranslate"><span class="pre">HAZ_DEMO_MAT</span></code>. This contains 1445 historical events from year 1851 to 2011 and 9 synthetic events for each historical one.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">climada.hazard</span> <span class="kn">import</span> <span class="n">Hazard</span>
<span class="kn">from</span> <span class="nn">climada.util</span> <span class="kn">import</span> <span class="n">HAZ_DEMO_MAT</span>
<span class="n">tc_fl</span> <span class="o">=</span> <span class="n">Hazard</span><span class="p">(</span><span class="s1">&#39;TC&#39;</span><span class="p">)</span>
<span class="n">tc_fl</span><span class="o">.</span><span class="n">read_mat</span><span class="p">(</span><span class="n">HAZ_DEMO_MAT</span><span class="p">,</span> <span class="s1">&#39;Historic and synthetic tropical cyclones in Florida from 1851 to 2011.&#39;</span><span class="p">)</span>
<span class="n">tc_fl</span><span class="o">.</span><span class="n">plot_intensity</span><span class="p">(</span><span class="s1">&#39;ANDREW&#39;</span><span class="p">)</span> <span class="c1"># plot intensity of hurricanes Andrew</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Two hurricanes called Andrew happened in &#39;</span><span class="p">,</span> <span class="n">tc_fl</span><span class="o">.</span><span class="n">get_event_date</span><span class="p">(</span><span class="s1">&#39;ANDREW&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2019-04-05 11:30:42,705 - climada.hazard.centroids.base - INFO - Reading file: /Users/aznarsig/Documents/Python/climada_python/data/demo/atl_prob.mat
Two hurricanes called Andrew happened in  [&#39;1986-06-05&#39;, &#39;1992-08-16&#39;]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_17_1.png" src="../_images/tutorial_1_main_climada_17_1.png" />
</div>
</div>
</div>
<div class="section" id="Impact">
<h2>Impact<a class="headerlink" href="#Impact" title="Permalink to this headline">Â¶</a></h2>
<p>The impact of hazard events over an entity can be computed easily from the previously explained classes. By computing the impact for each event (historical and synthetic), the <code class="docutils literal notranslate"><span class="pre">Impact</span></code> class provides different risk measures, as the expected annual impact per exposure, the probable maximum impact for different return periods and the total average annual impact.</p>
<p>Let us compute the impact of tropical cyclones over the exposures selected in Florida.</p>
<p>The configurable parameter <code class="docutils literal notranslate"><span class="pre">MAX_SIZE</span></code> controls the maximum matrix size contained in a chunk. You can decrease its value if you are having memory issues when using the <code class="docutils literal notranslate"><span class="pre">Impact</span></code>âs <code class="docutils literal notranslate"><span class="pre">calc</span></code> method. A high value will make the computation fast, but increase the memory use. The configuration file is located at <code class="docutils literal notranslate"><span class="pre">climada_python/climada/conf/defaults.conf</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">climada.engine</span> <span class="kn">import</span> <span class="n">Impact</span>

<span class="n">imp_fl</span> <span class="o">=</span> <span class="n">Impact</span><span class="p">()</span>
<span class="n">imp_fl</span><span class="o">.</span><span class="n">calc</span><span class="p">(</span><span class="n">ent_fl</span><span class="o">.</span><span class="n">exposures</span><span class="p">,</span> <span class="n">ent_fl</span><span class="o">.</span><span class="n">impact_funcs</span><span class="p">,</span> <span class="n">tc_fl</span><span class="p">)</span>

<span class="n">freq_curve_fl</span> <span class="o">=</span> <span class="n">imp_fl</span><span class="o">.</span><span class="n">calc_freq_curve</span><span class="p">()</span> <span class="c1"># impact exceedence frequency curve</span>
<span class="n">freq_curve_fl</span><span class="o">.</span><span class="n">plot</span><span class="p">();</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Expected average annual impact: {:.3e} USD&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">imp_fl</span><span class="o">.</span><span class="n">aai_agg</span><span class="p">))</span>

<span class="n">imp_fl</span><span class="o">.</span><span class="n">plot_basemap_eai_exposure</span><span class="p">(</span><span class="nb">buffer</span><span class="o">=</span><span class="mf">50000.0</span><span class="p">);</span> <span class="c1"># average annual impact at each exposure</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2019-04-05 11:30:55,193 - climada.entity.exposures.base - INFO - Matching 50 exposures with 100 centroids.
2019-04-05 11:30:55,197 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
Expected average annual impact: 6.512e+09 USD
2019-04-05 11:30:55,245 - climada.entity.exposures.base - INFO - tag metadata set to default value:  File:
 Description:
2019-04-05 11:30:55,246 - climada.entity.exposures.base - INFO - ref_year metadata set to default value: 2018
2019-04-05 11:30:55,247 - climada.entity.exposures.base - INFO - Setting if_ to default impact functions ids 1.
2019-04-05 11:30:55,248 - climada.entity.exposures.base - INFO - centr_ not set.
2019-04-05 11:30:55,250 - climada.entity.exposures.base - INFO - deductible not set.
2019-04-05 11:30:55,251 - climada.entity.exposures.base - INFO - cover not set.
2019-04-05 11:30:55,251 - climada.entity.exposures.base - INFO - category_id not set.
2019-04-05 11:30:55,252 - climada.entity.exposures.base - INFO - region_id not set.
2019-04-05 11:30:55,253 - climada.entity.exposures.base - INFO - geometry not set.
2019-04-05 11:30:55,254 - climada.entity.exposures.base - INFO - Setting geometry attribute.
2019-04-05 11:30:55,263 - climada.entity.exposures.base - INFO - Setting latitude and longitude attributes.
2019-04-05 11:30:56,457 - climada.entity.exposures.base - INFO - Setting latitude and longitude attributes.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_21_1.png" src="../_images/tutorial_1_main_climada_21_1.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_21_2.png" src="../_images/tutorial_1_main_climada_21_2.png" />
</div>
</div>
<p>We can save our variables in pickle format using the <code class="docutils literal notranslate"><span class="pre">save</span></code> function. This will save your results in the folder specified in the configuration file. The default folder is a <code class="docutils literal notranslate"><span class="pre">results</span></code> folder which is created in the current path.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">climada.util</span> <span class="kn">import</span> <span class="n">save</span>
<span class="n">save</span><span class="p">(</span><span class="s1">&#39;impact_florida.p&#39;</span><span class="p">,</span> <span class="n">imp_fl</span><span class="p">)</span>

<span class="c1"># Later, the data can be read as follows:</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">abs_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s1">&#39;results/impact_florida.p&#39;</span><span class="p">)</span> <span class="c1"># absolute path</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">abs_path</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Data read:&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2019-04-05 11:30:56,881 - climada.util.save - INFO - Written file /Users/aznarsig/Documents/Python/tutorial/results/impact_florida.p
Data read: &lt;class &#39;climada.engine.impact.Impact&#39;&gt;
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Impact</span></code> also has <code class="docutils literal notranslate"><span class="pre">write_csv()</span></code> and <code class="docutils literal notranslate"><span class="pre">write_excel()</span></code> methods to save the impact variables, and <code class="docutils literal notranslate"><span class="pre">write_sparse_csr()</span></code> to save the impact matrix (impact per event and exposure). Use the class doc to get more information about these functions.</p>
</div>
</div>
<div class="section" id="Adaptation-options-appraisal">
<h1>Adaptation options appraisal<a class="headerlink" href="#Adaptation-options-appraisal" title="Permalink to this headline">Â¶</a></h1>
<p>The adaptation measures defined before can be valued by estimating its cost-benefit ratio. This is done in the class <code class="docutils literal notranslate"><span class="pre">CostBenefit</span></code>.</p>
<p>Let us suppose that the socioeconomic and climatoligical conditions remain the same in 2040. We then compute the cost and benefit of every adaptation measure as follows:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">climada.engine</span> <span class="kn">import</span> <span class="n">CostBenefit</span>

<span class="n">cost_ben</span> <span class="o">=</span> <span class="n">CostBenefit</span><span class="p">()</span>
<span class="n">cost_ben</span><span class="o">.</span><span class="n">calc</span><span class="p">(</span><span class="n">tc_fl</span><span class="p">,</span> <span class="n">ent_fl</span><span class="p">,</span> <span class="n">future_year</span><span class="o">=</span><span class="mi">2040</span><span class="p">)</span> <span class="c1"># prints costs and benefits</span>
<span class="n">cost_ben</span><span class="o">.</span><span class="n">plot_cost_benefit</span><span class="p">()</span> <span class="c1"># plot cost benefit ratio and averted damage of every exposure</span>
<span class="n">cost_ben</span><span class="o">.</span><span class="n">plot_event_view</span><span class="p">()</span> <span class="c1"># plot averted damage of each measure for every return period</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2019-04-05 11:30:56,897 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:56,900 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:56,934 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:56,936 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:56,960 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:56,962 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:56,986 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:56,987 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:57,240 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:57,242 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:57,272 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:57,273 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:57,300 - climada.engine.cost_benefit - INFO - Computing cost benefit from years 2018 to 2040.

Measure              Cost (USD bn)    Benefit (USD bn)    Benefit/Cost
-----------------  ---------------  ------------------  --------------
Mangroves                  1.31177             31.0058        23.6367
Beach nourishment          1.728               24.6898        14.2881
Seawall                    8.87878             33.133          3.7317
Building code              9.2                 30.3762         3.30177

--------------------  --------  --------
Total climate risk:   121.505   (USD bn)
Average annual risk:    6.5122  (USD bn)
Residual damage:        2.3001  (USD bn)
--------------------  --------  --------
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>(&lt;Figure size 432x288 with 1 Axes&gt;,
 &lt;matplotlib.axes._subplots.AxesSubplot at 0x1a2ad4c9b0&gt;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_27_2.png" src="../_images/tutorial_1_main_climada_27_2.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_27_3.png" src="../_images/tutorial_1_main_climada_27_3.png" />
</div>
</div>
<p>Let us now assume that the exposure evolves according to <code class="docutils literal notranslate"><span class="pre">ENT_DEMO_FUTURE</span></code> in 2040 and that the intensity of the hazards increase uniformly due to climate change.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">from</span> <span class="nn">climada.util.constants</span> <span class="kn">import</span> <span class="n">ENT_DEMO_FUTURE</span>

<span class="c1"># future conditions</span>
<span class="n">ent_future</span> <span class="o">=</span> <span class="n">Entity</span><span class="p">()</span>
<span class="n">ent_future</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">ENT_DEMO_FUTURE</span><span class="p">)</span>
<span class="n">ent_future</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
<span class="n">ent_future</span><span class="o">.</span><span class="n">exposures</span><span class="o">.</span><span class="n">ref_year</span> <span class="o">=</span> <span class="mi">2040</span>

<span class="n">haz_future</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">tc_fl</span><span class="p">)</span>
<span class="n">haz_future</span><span class="o">.</span><span class="n">intensity</span><span class="o">.</span><span class="n">data</span> <span class="o">+=</span> <span class="mi">15</span>  <span class="c1"># increase uniformly the intensity</span>

<span class="n">cost_ben</span> <span class="o">=</span> <span class="n">CostBenefit</span><span class="p">()</span>
<span class="n">cost_ben</span><span class="o">.</span><span class="n">calc</span><span class="p">(</span><span class="n">tc_fl</span><span class="p">,</span> <span class="n">ent_fl</span><span class="p">,</span> <span class="n">haz_future</span><span class="p">,</span> <span class="n">ent_future</span><span class="p">)</span>
<span class="n">cost_ben</span><span class="o">.</span><span class="n">plot_cost_benefit</span><span class="p">()</span> <span class="c1"># plot cost benefit ratio and averted damage of every exposure</span>
<span class="n">cost_ben</span><span class="o">.</span><span class="n">plot_event_view</span><span class="p">()</span> <span class="c1"># plot averted damage of each measure for every return period</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">cost_ben</span><span class="o">.</span><span class="n">plot_waterfall</span><span class="p">(</span><span class="n">tc_fl</span><span class="p">,</span> <span class="n">ent_fl</span><span class="p">,</span> <span class="n">haz_future</span><span class="p">,</span> <span class="n">ent_future</span><span class="p">)</span> <span class="c1">#Â plot expected annual impact</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Expected Annual Impact in 2015 and 2040&#39;</span><span class="p">)</span>
<span class="n">cost_ben</span><span class="o">.</span><span class="n">plot_waterfall_accumulated</span><span class="p">(</span><span class="n">tc_fl</span><span class="p">,</span> <span class="n">ent_fl</span><span class="p">,</span> <span class="n">haz_future</span><span class="p">,</span> <span class="n">ent_future</span><span class="p">)</span> <span class="c1"># plot accumulated impact from present to future</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2019-04-05 11:30:57,643 - climada.entity.exposures.base - INFO - crs set to default value: {&#39;init&#39;: &#39;epsg:4326&#39;}
2019-04-05 11:30:57,644 - climada.entity.exposures.base - INFO - ref_year metadata set to default value: 2018
2019-04-05 11:30:57,645 - climada.entity.exposures.base - INFO - value_unit metadata set to default value: USD
2019-04-05 11:30:57,646 - climada.entity.exposures.base - INFO - centr_ not set.
2019-04-05 11:30:57,647 - climada.entity.exposures.base - INFO - category_id not set.
2019-04-05 11:30:57,648 - climada.entity.exposures.base - INFO - region_id not set.
2019-04-05 11:30:57,649 - climada.entity.exposures.base - INFO - geometry not set.
2019-04-05 11:30:57,661 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:57,662 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:57,690 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:57,691 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:57,716 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:57,717 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:57,741 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:57,742 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:57,911 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:57,913 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:57,934 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:57,935 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:57,960 - climada.entity.exposures.base - INFO - Matching 50 exposures with 100 centroids.
2019-04-05 11:30:57,964 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:57,992 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:57,994 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:58,018 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:58,020 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:58,046 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:58,048 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:58,276 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:58,278 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:58,298 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:58,299 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:58,326 - climada.engine.cost_benefit - INFO - Computing cost benefit from years 2018 to 2040.

Measure              Cost (USD bn)    Benefit (USD bn)    Benefit/Cost
-----------------  ---------------  ------------------  --------------
Mangroves                  1.31177             80.0097        60.9938
Beach nourishment          1.728               63.3336        36.6514
Seawall                    8.87878            164.132         18.4858
Building code              9.2                 90.2786         9.81289

--------------------  --------  --------
Total climate risk:   361.115   (USD bn)
Average annual risk:   34.3977  (USD bn)
Residual damage:      -36.6389  (USD bn)
--------------------  --------  --------
2019-04-05 11:30:58,392 - climada.engine.cost_benefit - INFO - Risk at 2018: 6.512e+09
2019-04-05 11:30:58,392 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:58,394 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:58,418 - climada.engine.cost_benefit - INFO - Risk with development at 2040: 1.302e+10
2019-04-05 11:30:58,418 - climada.engine.cost_benefit - INFO - Risk with development and climate change at 2040: 3.440e+10
2019-04-05 11:30:58,431 - climada.engine.cost_benefit - INFO - Current total risk at 2040: 1.215e+11
2019-04-05 11:30:58,432 - climada.engine.impact - INFO - Exposures matching centroids found in centr_TC
2019-04-05 11:30:58,433 - climada.engine.impact - INFO - Calculating damage for 50 assets (&gt;0) and 14450 events.
2019-04-05 11:30:58,456 - climada.engine.cost_benefit - INFO - Total risk with development at 2040: 1.775e+11
2019-04-05 11:30:58,457 - climada.engine.cost_benefit - INFO - Total risk with development and climate change at 2040: 3.611e+11
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>(&lt;Figure size 432x288 with 1 Axes&gt;,
 &lt;matplotlib.axes._subplots.AxesSubplot at 0x1a125b9da0&gt;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_29_2.png" src="../_images/tutorial_1_main_climada_29_2.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_29_3.png" src="../_images/tutorial_1_main_climada_29_3.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_29_4.png" src="../_images/tutorial_1_main_climada_29_4.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_29_5.png" src="../_images/tutorial_1_main_climada_29_5.png" />
</div>
</div>
<p>Check what happens when different parameters are changed, such as the <code class="docutils literal notranslate"><span class="pre">imp_time_depen</span></code> and <code class="docutils literal notranslate"><span class="pre">risk_func</span></code> in CostBenefit.calc() (and plot_waterfall(), plot_waterfall_accumulated())</p>
</div>
<div class="section" id="Your-case">
<h1>Your case<a class="headerlink" href="#Your-case" title="Permalink to this headline">Â¶</a></h1>
<ol class="arabic simple">
<li>Build an entity. It might be one from your previous runs in MATLAB. Make sure iâis saved in version &gt; v7.3 if itâs a MATLAB file. If itâs not, youâll get an error message. Then, you can save it again in MATLAB like that: <code class="docutils literal notranslate"><span class="pre">save('file_name.mat','variable_name',</span> <span class="pre">'-v7.3')</span></code></li>
<li>Build a hazard. It might also come from a previous run in MATLAB. This file might already contain the centroids. If not, define the centroids as well and use them in your calculations.</li>
<li>Compute the impact.</li>
<li>Visualization. Plot:</li>
</ol>
<ul class="simple">
<li>the damage functions for the hazard</li>
<li>the entity values map</li>
<li>the strongest event intensity</li>
<li>the maximum hazard intensity of all the events in ZÃ¼rich (47.38, 8.54)</li>
<li>the impact exceedence frequency curve</li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Put your code here</span>





</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># SOLUTION: example: winter storms in europe</span>
<span class="kn">from</span> <span class="nn">climada.util</span> <span class="kn">import</span> <span class="n">DATA_DIR</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">climada.hazard</span> <span class="kn">import</span> <span class="n">Hazard</span>
<span class="kn">from</span> <span class="nn">climada.entity</span> <span class="kn">import</span> <span class="n">Exposures</span><span class="p">,</span> <span class="n">ImpactFuncSet</span>
<span class="kn">from</span> <span class="nn">climada.engine</span> <span class="kn">import</span> <span class="n">Impact</span>

<span class="c1"># Put any absoulte path for your files or set up the configuration variable &quot;repository&quot;</span>
<span class="n">FILE_HAZARD</span> <span class="o">=</span> <span class="n">DATA_DIR</span> <span class="o">+</span> <span class="s1">&#39;/demo/WS_ERA40.mat&#39;</span>
<span class="n">FILE_ENTITY</span> <span class="o">=</span> <span class="n">DATA_DIR</span> <span class="o">+</span> <span class="s1">&#39;/demo/WS_Europe.xls&#39;</span>

<span class="c1"># Define hazard type</span>
<span class="n">HAZ_TYPE</span> <span class="o">=</span> <span class="s1">&#39;WS&#39;</span>

<span class="c1"># 1. Entity: we only need impact functions and exposures to compute the impact</span>
<span class="c1"># Exposures</span>
<span class="n">exp_ws_eu</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">FILE_ENTITY</span><span class="p">)</span>
<span class="n">exp_ws_eu</span> <span class="o">=</span> <span class="n">Exposures</span><span class="p">(</span><span class="n">exp_ws_eu</span><span class="p">)</span>
<span class="n">exp_ws_eu</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>

<span class="c1"># Impact functions</span>
<span class="n">impf_ws_eu</span> <span class="o">=</span> <span class="n">ImpactFuncSet</span><span class="p">()</span>
<span class="n">impf_ws_eu</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">FILE_ENTITY</span><span class="p">,</span> <span class="s1">&#39;Impact functions for winter storms in EU.&#39;</span><span class="p">)</span>

<span class="c1"># 2. Hazard</span>
<span class="n">haz_ws_eu</span> <span class="o">=</span> <span class="n">Hazard</span><span class="p">(</span><span class="n">HAZ_TYPE</span><span class="p">)</span>
<span class="n">haz_ws_eu</span><span class="o">.</span><span class="n">read_mat</span><span class="p">(</span><span class="n">FILE_HAZARD</span><span class="p">,</span> <span class="s1">&#39;WS EU ERA 40&#39;</span><span class="p">)</span>

<span class="c1">#Â 3. Impact</span>
<span class="n">imp_ws_eu</span> <span class="o">=</span> <span class="n">Impact</span><span class="p">()</span>
<span class="n">imp_ws_eu</span><span class="o">.</span><span class="n">calc</span><span class="p">(</span><span class="n">exp_ws_eu</span><span class="p">,</span> <span class="n">impf_ws_eu</span><span class="p">,</span> <span class="n">haz_ws_eu</span><span class="p">)</span>

<span class="c1"># 4.</span>
<span class="c1"># the damage functions for the hazard</span>
<span class="n">impf_ws_eu</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="c1"># the exposures values map</span>
<span class="n">exp_ws_eu</span><span class="o">.</span><span class="n">plot_hexbin</span><span class="p">(</span><span class="n">pop_name</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="c1"># the strongest event</span>
<span class="n">haz_ws_eu</span><span class="o">.</span><span class="n">plot_intensity</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># might be better to use an other earth projection?</span>

<span class="c1"># the impact exceedence frequency curve</span>
<span class="n">imp_exc_curve</span> <span class="o">=</span> <span class="n">imp_ws_eu</span><span class="o">.</span><span class="n">calc_freq_curve</span><span class="p">()</span>
<span class="n">imp_exc_curve</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2019-04-05 11:30:59,041 - climada.entity.exposures.base - INFO - crs set to default value: {&#39;init&#39;: &#39;epsg:4326&#39;}
2019-04-05 11:30:59,042 - climada.entity.exposures.base - INFO - tag metadata set to default value:  File:
 Description:
2019-04-05 11:30:59,042 - climada.entity.exposures.base - INFO - ref_year metadata set to default value: 2018
2019-04-05 11:30:59,043 - climada.entity.exposures.base - INFO - value_unit metadata set to default value: USD
2019-04-05 11:30:59,044 - climada.entity.exposures.base - INFO - centr_ not set.
2019-04-05 11:30:59,045 - climada.entity.exposures.base - INFO - category_id not set.
2019-04-05 11:30:59,046 - climada.entity.exposures.base - INFO - region_id not set.
2019-04-05 11:30:59,047 - climada.entity.exposures.base - INFO - geometry not set.
2019-04-05 11:30:59,374 - climada.hazard.centroids.base - INFO - Reading file: /Users/aznarsig/Documents/Python/climada_python/data/demo/WS_ERA40.mat
2019-04-05 11:30:59,675 - climada.entity.exposures.base - INFO - Matching 6186 exposures with 6331 centroids.
2019-04-05 11:31:00,392 - climada.engine.impact - INFO - Calculating damage for 6186 assets (&gt;0) and 1755 events.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>(&lt;Figure size 288x288 with 1 Axes&gt;,
 [&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a2a941748&gt;])
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_34_2.png" src="../_images/tutorial_1_main_climada_34_2.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_34_3.png" src="../_images/tutorial_1_main_climada_34_3.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_34_4.png" src="../_images/tutorial_1_main_climada_34_4.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorial_1_main_climada_34_5.png" src="../_images/tutorial_1_main_climada_34_5.png" />
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../guide/data_dependencies.html" title="Data dependencies"
             >next</a> |</li>
        <li class="right" >
          <a href="../guide/tutorial.html" title="Tutorial"
             >previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../search.html">search</a>|&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../guide/tutorial.html" >Tutorial</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, ETH Zurich.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>